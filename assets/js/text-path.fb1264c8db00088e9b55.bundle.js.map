{"version":3,"sources":["../../assets/dev/js/frontend/utils/utils.js","../../modules/shapes/assets/js/frontend/handlers/text-path.js","../../node_modules/core-js/modules/_string-html.js","../../node_modules/core-js/modules/es6.regexp.replace.js","../../node_modules/core-js/modules/es6.string.link.js"],"names":["escapeHTML","str","specialChars","replace","tag","TextPathHandler","selectors","pathContainer","svg","getSettings","element","$element","widgetWrapper","querySelector","textPath","elements","getDefaultElements","pathId","dataset","id","textPathId","initTextPath","offset","isRTL","setAttribute","setting","getElementSettings","startPoint","start_point","text","setOffset","size","setText","path","attachIdToPath","innerHTML","newText","link","url","isExternal","is_external","nofollow","target","rel","existingClone","remove","shouldReverseText","clone","cloneNode","classList","add","textContent","parentNode","appendChild","reverseToRTL","direction","text_path_direction","elementorFrontend","config","is_rtl","navigator","userAgent","indexOf","parentElement","pattern","word","split","reverse","join","elementorModules","frontend","handlers","Base"],"mappings":"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AAED;AACD;AACA;AACA;AACA;;;;wCACqB;AACnB,aAAS,KAAKA,KAAL,MAAgB,CAAC,CAAD,KAAOqC,SAAS,CAACC,SAAV,CAAoBC,OAApB,CAA6B,SAA7B,CAAhC;AACA;AAED;AACD;AACA;AACA;AACA;;;;mCACgB;AACd;AACA,UAAIC,aAAa,GAAG,KAAKhD,QAAL,CAAcD,QAAlC;AACAiD,mBAAa,GAAGA,aAAa,CAAClD,aAAd,CAA6B,GAA7B,KAAsCkD,aAAtD,CAHc,CAKd;;AACA,UAAMC,OAAO,GAAG,0FAAhB,CANc,CAQd;;AACAD,mBAAa,CAACZ,WAAd,GAA4BY,aAAa,CAACZ,WAAd,CAA0BhD,OAA1B,CAAmC6D,OAAnC,EAA4C,UAAEC,IAAF,EAAY;AACnF,eAAOA,IAAI,CAACC,KAAL,CAAY,EAAZ,EAAiBC,OAAjB,GAA2BC,IAA3B,CAAiC,EAAjC,CAAP;AACA,OAF2B,CAA5B,CATc,CAad;;AACAL,mBAAa,CAACvC,YAAd,CAA4B,aAA5B,EAA2C,IAA3C;AACA;;;EA5N2C6C,gBAAgB,CAACC,QAAjB,CAA0BC,QAA1B,CAAmCC,I;;;;;;;;;;;;;;;ACFhF,cAAc,mBAAO,CAAC,6DAAW;AACjC,YAAY,mBAAO,CAAC,2DAAU;AAC9B,cAAc,mBAAO,CAAC,+DAAY;AAClC;AACA;AACA;AACA;AACA;AACA,0FAA0F;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;;;AClBa;;AAEb,eAAe,mBAAO,CAAC,mEAAc;AACrC,eAAe,mBAAO,CAAC,mEAAc;AACrC,eAAe,mBAAO,CAAC,mEAAc;AACrC,gBAAgB,mBAAO,CAAC,qEAAe;AACvC,yBAAyB,mBAAO,CAAC,yFAAyB;AAC1D,iBAAiB,mBAAO,CAAC,yFAAyB;AAClD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mBAAO,CAAC,qEAAe;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;;;;;;;;;;;;;ACrHY;AACb;AACA,mBAAO,CAAC,uEAAgB;AACxB;AACA;AACA;AACA,CAAC","file":"text-path.fb1264c8db00088e9b55.bundle.js","sourcesContent":["// Escape HTML special chars to prevent XSS.\nexport const escapeHTML = ( str ) => {\n\tconst specialChars = {\n\t\t'&': '&amp;',\n\t\t'<': '&lt;',\n\t\t'>': '&gt;',\n\t\t\"'\": '&#39;',\n\t\t'\"': '&quot;',\n\t};\n\n\treturn str.replace( /[&<>'\"]/g, ( tag ) => specialChars[ tag ] || tag );\n};\n","import { escapeHTML } from 'elementor-frontend/utils/utils';\n\nexport default class TextPathHandler extends elementorModules.frontend.handlers.Base {\n\tgetDefaultSettings() {\n\t\treturn {\n\t\t\tselectors: {\n\t\t\t\tpathContainer: '.e-text-path',\n\t\t\t\tsvg: '.e-text-path > svg',\n\t\t\t},\n\t\t};\n\t}\n\n\tgetDefaultElements() {\n\t\tconst { selectors } = this.getSettings();\n\t\tconst element = this.$element[ 0 ];\n\n\t\treturn {\n\t\t\twidgetWrapper: element,\n\t\t\tpathContainer: element.querySelector( selectors.pathContainer ),\n\t\t\tsvg: element.querySelector( selectors.svg ),\n\t\t\ttextPath: element.querySelector( selectors.textPath ),\n\t\t};\n\t}\n\n\t/**\n\t * Initialize the object.\n\t *\n\t * @returns {void}\n\t */\n\tonInit() {\n\t\tthis.elements = this.getDefaultElements();\n\n\t\t// Generate unique IDs using the wrapper's `data-id`.\n\t\tthis.pathId = `e-path-${ this.elements.widgetWrapper.dataset.id }`;\n\t\tthis.textPathId = `e-text-path-${ this.elements.widgetWrapper.dataset.id }`;\n\n\t\tif ( ! this.elements.svg ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.initTextPath();\n\t}\n\n\t/**\n\t * Set the start offset for the text.\n\t *\n\t * @param offset {string|int} The text start offset.\n\t *\n\t * @returns {void}\n\t */\n\tsetOffset( offset ) {\n\t\tif ( ! this.elements.textPath ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.isRTL() ) {\n\t\t\toffset = 100 - parseInt( offset );\n\t\t}\n\n\t\tthis.elements.textPath.setAttribute( 'startOffset', offset + '%' );\n\t}\n\n\t/**\n\t * Handle element settings changes.\n\t *\n\t * @param setting {Object} The settings object from the editor.\n\t *\n\t * @returns {void}\n\t */\n\tonElementChange( setting ) {\n\t\tconst {\n\t\t\tstart_point: startPoint,\n\t\t\ttext,\n\t\t} = this.getElementSettings();\n\n\t\tswitch ( setting ) {\n\t\t\tcase 'start_point':\n\t\t\t\tthis.setOffset( startPoint.size );\n\t\t\t\tbreak;\n\n\t\t\tcase 'text':\n\t\t\t\tthis.setText( text );\n\t\t\t\tbreak;\n\n\t\t\tcase 'text_path_direction':\n\t\t\t\tthis.setOffset( startPoint.size );\n\t\t\t\tthis.setText( text );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Attach a unique id to the path.\n\t *\n\t * @returns {void}\n\t */\n\tattachIdToPath() {\n\t\t// Prioritize the custom `data` attribute over the `path` element, and fallback to the first `path`.\n\t\tconst path = this.elements.svg.querySelector( '[data-path-anchor]' ) || this.elements.svg.querySelector( 'path' );\n\t\tpath.id = this.pathId;\n\t}\n\n\t/**\n\t * Initialize the text path element.\n\t *\n\t * @returns {void}\n\t */\n\tinitTextPath() {\n\t\tconst {\n\t\t\tstart_point: startPoint,\n\t\t\ttext,\n\t\t} = this.getElementSettings();\n\n\t\tthis.attachIdToPath();\n\n\t\t// Generate the `textPath` element with its settings.\n\t\tthis.elements.svg.innerHTML += `\n\t\t\t<text>\n\t\t\t\t<textPath id=\"${ this.textPathId }\" href=\"#${ this.pathId }\"></textPath>\n\t\t\t</text>\n\t\t`;\n\n\t\t// Regenerate the elements object to have access to `this.elements.textPath`.\n\t\tthis.elements.textPath = this.elements.svg.querySelector( `#${ this.textPathId }` );\n\n\t\tthis.setOffset( startPoint.size );\n\t\tthis.setText( text );\n\t}\n\n\t/**\n\t * Set the new text into the path.\n\t *\n\t * @param newText {string} The new text to put in the text path.\n\t *\n\t * @returns {void}\n\t */\n\tsetText( newText ) {\n\t\tconst {\n\t\t\turl,\n\t\t\tis_external: isExternal,\n\t\t\tnofollow,\n\t\t} = this.getElementSettings()?.link;\n\n\t\tconst target = isExternal ? '_blank' : '',\n\t\t\trel = nofollow ? 'nofollow' : '';\n\n\t\t// Add link attributes.\n\t\tif ( url ) {\n\t\t\tnewText = `<a href=\"${ escapeHTML( url ) }\" rel=\"${ rel }\" target=\"${ target }\">${ escapeHTML( newText ) }</a>`;\n\t\t}\n\n\t\t// Set the text.\n\t\tthis.elements.textPath.innerHTML = newText;\n\n\t\t// Remove the cloned element if exists.\n\t\tconst existingClone = this.elements.svg.querySelector( `#${ this.textPathId }-clone` );\n\n\t\tif ( existingClone ) {\n\t\t\texistingClone.remove();\n\t\t}\n\n\t\t// Reverse the text if needed.\n\t\tif ( this.shouldReverseText() ) {\n\t\t\t// Keep an invisible selectable copy of original element for better a11y.\n\t\t\tconst clone = this.elements.textPath.cloneNode();\n\t\t\tclone.id += '-clone';\n\t\t\tclone.classList.add( 'elementor-hidden' );\n\t\t\tclone.textContent = newText;\n\n\t\t\tthis.elements.textPath.parentNode.appendChild( clone );\n\t\t\tthis.reverseToRTL();\n\t\t}\n\t}\n\n\t/**\n\t * Determine if the current layout should be RTL.\n\t *\n\t * @returns {boolean}\n\t */\n\tisRTL() {\n\t\tconst { text_path_direction: direction } = this.getElementSettings();\n\t\tlet isRTL = elementorFrontend.config.is_rtl;\n\n\t\tif ( direction ) {\n\t\t\tisRTL = ( 'rtl' === direction );\n\t\t}\n\n\t\treturn isRTL;\n\t}\n\n\t/**\n\t * Determine if it should RTL the text (reversing it, etc.).\n\t *\n\t * @returns {boolean}\n\t */\n\tshouldReverseText() {\n\t\treturn ( this.isRTL() && -1 === navigator.userAgent.indexOf( 'Firefox' ) );\n\t}\n\n\t/**\n\t * Reverse the text path to support RTL.\n\t *\n\t * @returns {void}\n\t */\n\treverseToRTL() {\n\t\t// Make sure to use the inner `a` tag if exists.\n\t\tlet parentElement = this.elements.textPath;\n\t\tparentElement = parentElement.querySelector( 'a' ) || parentElement;\n\n\t\t// Catch all RTL chars and reverse their order.\n\t\tconst pattern = /([\\u0591-\\u07FF\\u200F\\u202B\\u202E\\uFB1D-\\uFDFD\\uFE70-\\uFEFC\\s$&+,:;=?@#|'<>.^*()%!-]+)/ig;\n\n\t\t// Reverse the text.\n\t\tparentElement.textContent = parentElement.textContent.replace( pattern, ( word ) => {\n\t\t\treturn word.split( '' ).reverse().join( '' );\n\t\t} );\n\n\t\t// Add a11y attributes.\n\t\tparentElement.setAttribute( 'aria-hidden', true );\n\t}\n}\n","var $export = require('./_export');\nvar fails = require('./_fails');\nvar defined = require('./_defined');\nvar quot = /\"/g;\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\nvar createHTML = function (string, tag, attribute, value) {\n  var S = String(defined(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\nmodule.exports = function (NAME, exec) {\n  var O = {};\n  O[NAME] = exec(createHTML);\n  $export($export.P + $export.F * fails(function () {\n    var test = ''[NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  }), 'String', O);\n};\n","'use strict';\n\nvar anObject = require('./_an-object');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar toInteger = require('./_to-integer');\nvar advanceStringIndex = require('./_advance-string-index');\nvar regExpExec = require('./_regexp-exec-abstract');\nvar max = Math.max;\nvar min = Math.min;\nvar floor = Math.floor;\nvar SUBSTITUTION_SYMBOLS = /\\$([$&`']|\\d\\d?|<[^>]*>)/g;\nvar SUBSTITUTION_SYMBOLS_NO_NAMED = /\\$([$&`']|\\d\\d?)/g;\n\nvar maybeToString = function (it) {\n  return it === undefined ? it : String(it);\n};\n\n// @@replace logic\nrequire('./_fix-re-wks')('replace', 2, function (defined, REPLACE, $replace, maybeCallNative) {\n  return [\n    // `String.prototype.replace` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.replace\n    function replace(searchValue, replaceValue) {\n      var O = defined(this);\n      var fn = searchValue == undefined ? undefined : searchValue[REPLACE];\n      return fn !== undefined\n        ? fn.call(searchValue, O, replaceValue)\n        : $replace.call(String(O), searchValue, replaceValue);\n    },\n    // `RegExp.prototype[@@replace]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@replace\n    function (regexp, replaceValue) {\n      var res = maybeCallNative($replace, regexp, this, replaceValue);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n      var functionalReplace = typeof replaceValue === 'function';\n      if (!functionalReplace) replaceValue = String(replaceValue);\n      var global = rx.global;\n      if (global) {\n        var fullUnicode = rx.unicode;\n        rx.lastIndex = 0;\n      }\n      var results = [];\n      while (true) {\n        var result = regExpExec(rx, S);\n        if (result === null) break;\n        results.push(result);\n        if (!global) break;\n        var matchStr = String(result[0]);\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n      }\n      var accumulatedResult = '';\n      var nextSourcePosition = 0;\n      for (var i = 0; i < results.length; i++) {\n        result = results[i];\n        var matched = String(result[0]);\n        var position = max(min(toInteger(result.index), S.length), 0);\n        var captures = [];\n        // NOTE: This is equivalent to\n        //   captures = result.slice(1).map(maybeToString)\n        // but for some reason `nativeSlice.call(result, 1, result.length)` (called in\n        // the slice polyfill when slicing native arrays) \"doesn't work\" in safari 9 and\n        // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.\n        for (var j = 1; j < result.length; j++) captures.push(maybeToString(result[j]));\n        var namedCaptures = result.groups;\n        if (functionalReplace) {\n          var replacerArgs = [matched].concat(captures, position, S);\n          if (namedCaptures !== undefined) replacerArgs.push(namedCaptures);\n          var replacement = String(replaceValue.apply(undefined, replacerArgs));\n        } else {\n          replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);\n        }\n        if (position >= nextSourcePosition) {\n          accumulatedResult += S.slice(nextSourcePosition, position) + replacement;\n          nextSourcePosition = position + matched.length;\n        }\n      }\n      return accumulatedResult + S.slice(nextSourcePosition);\n    }\n  ];\n\n    // https://tc39.github.io/ecma262/#sec-getsubstitution\n  function getSubstitution(matched, str, position, captures, namedCaptures, replacement) {\n    var tailPos = position + matched.length;\n    var m = captures.length;\n    var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;\n    if (namedCaptures !== undefined) {\n      namedCaptures = toObject(namedCaptures);\n      symbols = SUBSTITUTION_SYMBOLS;\n    }\n    return $replace.call(replacement, symbols, function (match, ch) {\n      var capture;\n      switch (ch.charAt(0)) {\n        case '$': return '$';\n        case '&': return matched;\n        case '`': return str.slice(0, position);\n        case \"'\": return str.slice(tailPos);\n        case '<':\n          capture = namedCaptures[ch.slice(1, -1)];\n          break;\n        default: // \\d\\d?\n          var n = +ch;\n          if (n === 0) return match;\n          if (n > m) {\n            var f = floor(n / 10);\n            if (f === 0) return match;\n            if (f <= m) return captures[f - 1] === undefined ? ch.charAt(1) : captures[f - 1] + ch.charAt(1);\n            return match;\n          }\n          capture = captures[n - 1];\n      }\n      return capture === undefined ? '' : capture;\n    });\n  }\n});\n","'use strict';\n// B.2.3.10 String.prototype.link(url)\nrequire('./_string-html')('link', function (createHTML) {\n  return function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  };\n});\n"],"sourceRoot":""}